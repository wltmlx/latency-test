#Thu Jun 26 07:49:32 UTC 2025
micronaut.application.name=latency-performance-test

# AS400 JDBC Configuration (overridden by environment variables)
datasources.default.url=${JDBC_URL:jdbc:as400://sitest.lkw-walter.com}
datasources.default.username=${JDBC_USERNAME:dataopsetl}
datasources.default.password=${JDBC_PASSWORD:password}
datasources.default.driver-class-name=${JDBC_DRIVER_CLASS:com.ibm.as400.access.AS400JDBCDriver}

# HikariCP Connection Pool Configuration
datasources.default.pool-name=AS400Pool
datasources.default.maximum-pool-size=${JDBC_POOL_SIZE:10}
datasources.default.minimum-idle=${JDBC_POOL_SIZE:5}
datasources.default.connection-timeout=${JDBC_CONNECTION_TIMEOUT:30000}
datasources.default.idle-timeout=600000
datasources.default.max-lifetime=1800000
datasources.default.leak-detection-threshold=60000
datasources.default.auto-commit=${JDBC_AUTO_COMMIT:true}

# JDBC Connection Properties for AS400
datasources.default.data-source-properties.socket.timeout=${JDBC_SOCKET_TIMEOUT:0}
datasources.default.data-source-properties.socket.keepAlive=true
datasources.default.data-source-properties.tcp.noDelay=${JDBC_TCP_NO_DELAY:true}

# AS400-Specific JDBC Properties (Performance Critical)
datasources.default.data-source-properties.thread.used=${JDBC_THREAD_USED:true}
datasources.default.data-source-properties.naming=${JDBC_NAMING:sql}
datasources.default.data-source-properties.libraries=${JDBC_LIBRARIES:}
datasources.default.data-source-properties.cursor.hold=${JDBC_CURSOR_HOLD:true}
datasources.default.data-source-properties.extended.dynamic=${JDBC_EXTENDED_DYNAMIC:true}
datasources.default.data-source-properties.block.size=${JDBC_BLOCK_SIZE:512}
datasources.default.data-source-properties.package.cache=${JDBC_STATEMENT_CACHE:true}

# JDBC Performance Configuration
jdbc.fetch-size=${JDBC_FETCH_SIZE:1000}
jdbc.query-timeout=${JDBC_QUERY_TIMEOUT:0}
jdbc.thread-used=${JDBC_THREAD_USED:true}
jdbc.naming=${JDBC_NAMING:sql}
jdbc.libraries=${JDBC_LIBRARIES:}
jdbc.cursor-hold=${JDBC_CURSOR_HOLD:true}
jdbc.extended-dynamic=${JDBC_EXTENDED_DYNAMIC:true}
jdbc.block-size=${JDBC_BLOCK_SIZE:512}
jdbc.statement-cache=${JDBC_STATEMENT_CACHE:true}

# Management and Metrics
endpoints.all.enabled=true
endpoints.health.enabled=true
endpoints.metrics.enabled=true
endpoints.prometheus.enabled=true

# Logging Configuration
micronaut.server.port=${PORT:8080}